CREATE DATABASE BD_PRODUTO;

USE BD_PRODUTO;

IF NOT EXISTS (SELECT * FROM SYSOBJECTS WHERE NAME='CATEGORIA' AND XTYPE='U')
CREATE TABLE CATEGORIA
( ID INT PRIMARY KEY IDENTITY(1,1)
, NOME VARCHAR(150)
, SITUACAO CHAR(7)
);



IF NOT EXISTS (SELECT * FROM SYSOBJECTS WHERE NAME='PRODUTO' AND XTYPE='U')
CREATE TABLE PRODUTO
( ID INT PRIMARY KEY IDENTITY(1,1)
, NOME VARCHAR(150)
, DESCRICAO VARCHAR(500)
, PRECO DECIMAL(10,2)
, SITUACAO CHAR(7)
, ID_CATEGORIA INT
, FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA(ID)

);

ALTER TABLE CATEGORIA WITH CHECK ADD CONSTRAINT CK_SITUACAO_CATEGORIA CHECK (SITUACAO IN ('ATIVO', 'INATIVO'));
ALTER TABLE PRODUTO WITH CHECK ADD CONSTRAINT CK_SITUACAO_PRODUTO CHECK (SITUACAO IN ('ATIVO', 'INATIVO'));